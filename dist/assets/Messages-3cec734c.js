import{u as p,k as j,j as e,L as u}from"./index-d63ee538.js";import{r as a}from"./vendor-021dee49.js";import{L as f}from"./router-3052588b.js";import{C as c}from"./ChatBubbleLeftIcon-5a8a0035.js";import{U as N}from"./UserIcon-725f4b63.js";import"./utils-917b1704.js";const y=()=>{const[i,o]=a.useState([]),[d,m]=a.useState(!0),[l,x]=a.useState("");p(),a.useEffect(()=>{h()},[]);const h=async()=>{try{const s=await j.get("/chats");o(s.data.chats)}catch(s){x("Failed to load chats"),console.error("Error fetching chats:",s)}finally{m(!1)}},g=s=>{const t=new Date(s),n=(new Date-t)/(1e3*60*60);return n<24?t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):n<168?t.toLocaleDateString("en-US",{weekday:"short"}):t.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return d?e.jsx(u,{}):e.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(c,{className:"h-5 w-5 mr-2"}),"Messages"]})}),l&&e.jsx("div",{className:"p-4 bg-red-50 border-l-4 border-red-400",children:e.jsx("p",{className:"text-red-700",children:l})}),e.jsx("div",{className:"divide-y divide-gray-200",children:i.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(c,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"No conversations yet"}),e.jsx("p",{className:"text-sm",children:"Start chatting with other dog owners!"})]}):i.map(s=>{var t;return e.jsx(f,{to:`/chat/${s._id}`,className:"block p-4 hover:bg-gray-50 transition-colors duration-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:(t=s.participants[0])!=null&&t.profileImage?e.jsx("img",{src:s.participants[0].profileImage,alt:`${s.participants[0].firstName} ${s.participants[0].lastName}`,className:"h-10 w-10 rounded-full object-cover"}):e.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:e.jsx(N,{className:"h-6 w-6 text-gray-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.participants.map(r=>`${r.firstName} ${r.lastName}`).join(", ")}),e.jsx("p",{className:"text-xs text-gray-500",children:g(s.lastMessageTime)})]}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:s.lastMessage||"No messages yet"})]})]})},s._id)})})]})},k=()=>e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Messages"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Connect with other dog owners in your community"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(y,{})}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Start a Conversation"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Select a conversation from the list to start chatting, or visit a dog park to meet new people!"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Safe and friendly community"]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Share tips and experiences"]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Plan meetups and playdates"]})]})]})})]})]})});export{k as default};
