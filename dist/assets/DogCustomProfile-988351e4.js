import{d as n,e as t,j as e,A as u}from"./index-d63ee538.js";import{r as g,R as f}from"./vendor-021dee49.js";import{C as h}from"./CustomProfileEditor-023afb3e.js";import{b,u as j}from"./router-3052588b.js";import"./utils-917b1704.js";import"./EyeSlashIcon-3abbdbae.js";import"./EyeIcon-6ff4a41f.js";const V=()=>{var d,m;const{id:a}=b(),l=j(),[i,c]=g.useState(null);g.useEffect(()=>(x(),()=>{localStorage.removeItem("currentDogData")}),[a]);const p=f.useMemo(()=>{const s=["name","breed","age","size","description","image","personality.friendly","personality.energetic","personality.social","medicalInfo.vaccinated"];if(i&&i.gallery&&Array.isArray(i.gallery)&&i.gallery.length>0){s.push("gallery");for(let r=0;r<Math.min(i.gallery.length,5);r++)s.push(`gallery[${r}]`)}return s},[i]),x=async()=>{try{const s=await n.getDogById(a);c(s.dog),localStorage.setItem("currentDogData",JSON.stringify(s.dog))}catch(s){console.error("Error loading dog:",s),t.error("Failed to load dog"),l("/my-dogs")}},y=async s=>{try{await n.updateCustomProfile(a,s),t.success("Custom profile updated successfully!"),l("/my-dogs")}catch(r){console.error("Error updating custom profile:",r),t.error("Failed to update custom profile")}},o=async s=>{try{await n.updateCustomProfile(a,{profileVisibility:s}),t.success("Profile visibility updated!"),c({...i,profileVisibility:s})}catch(r){console.error("Error updating visibility:",r),t.error("Failed to update visibility")}};return i?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsxs("button",{onClick:()=>l("/my-dogs"),className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Back to My Dogs"]}),e.jsxs("button",{onClick:()=>l("/"),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),"Back to App Design"]})]}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Custom Profile for ",i.name]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create a unique profile page for your dog"})]})}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Profile Visibility"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"visibility",value:"public",checked:i.profileVisibility==="public",onChange:s=>o(s.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"Public"}),e.jsx("span",{className:"block text-sm text-gray-500",children:"Anyone can view your dog's profile"})]})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"visibility",value:"friends",checked:i.profileVisibility==="friends",onChange:s=>o(s.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"Friends Only"}),e.jsx("span",{className:"block text-sm text-gray-500",children:"Only your friends can view the profile"})]})]}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"radio",name:"visibility",value:"private",checked:i.profileVisibility==="private",onChange:s=>o(s.target.value),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-700",children:"Private"}),e.jsx("span",{className:"block text-sm text-gray-500",children:"Only you can view the profile"})]})]})]}),i.profileVisibility==="public"&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Public Profile URL:"})," ",e.jsxs("a",{href:`${window.location.origin}/dogs/profile/${i._id}`,target:"_blank",rel:"noopener noreferrer",className:"underline",children:[window.location.origin,"/dogs/profile/",i._id]})]})})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsx(h,{initialHtml:((d=i.customProfile)==null?void 0:d.html)||"",initialCss:((m=i.customProfile)==null?void 0:m.css)||"",onSave:y,requiredFields:p,type:"dog"})})]}):null};export{V as default};
