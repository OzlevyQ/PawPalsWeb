import{u as B,e as j,j as e,p as F,M as V,i as k,c as w,S as N,T as G,b as H}from"./index-d63ee538.js";import{r as s}from"./vendor-021dee49.js";import{a as Q,d as _,L as R}from"./router-3052588b.js";import{eventService as z}from"./eventService-0703f6fe.js";import{E as q}from"./SkeletonLoading-3b438a19.js";import{C as J,E as K}from"./EventManager-556adb1f.js";import{P as O}from"./PlusIcon-d0c3f3f8.js";import{C as W}from"./CogIcon-57d60756.js";import{M as X}from"./MagnifyingGlassIcon-f062adc4.js";import{C as Y}from"./ClockIcon-d6d0aaad.js";import{A as C}from"./AcademicCapIcon-9bb0a344.js";import"./utils-917b1704.js";import"./gardenService-8e5619dd.js";import"./TagIcon-32febfd4.js";import"./XCircleIcon-3fe8bf8c.js";import"./ArrowPathIcon-a9aaab64.js";import"./UsersIcon-5daddd34.js";import"./EyeIcon-6ff4a41f.js";import"./PencilIcon-141964e2.js";const ye=()=>{var y;const[E,S]=s.useState([]),[I,g]=s.useState(!0),[n,T]=s.useState({status:"upcoming",eventType:"all"}),[x,A]=s.useState(""),[p,m]=s.useState("browse"),{user:c}=B();Q();const[h]=_(),l=c&&(c.role==="admin"||c.role==="garden_manager"||((y=c.eventPermissions)==null?void 0:y.canCreateEvents));s.useEffect(()=>{h.get("view")==="manage"&&l&&m("manage")},[h,l]),s.useEffect(()=>{b()},[n]);const b=async()=>{try{g(!0);const t={status:n.status};n.eventType!=="all"&&(t.eventType=n.eventType);const r=await z.getAllEvents(t);let a=[];r&&Array.isArray(r.docs)?a=r.docs:Array.isArray(r)?a=r:r&&Array.isArray(r.events)?a=r.events:r&&Array.isArray(r.data)?a=r.data:console.warn("Unexpected events response format:",r),S(a)}catch(t){console.error("Error loading events:",t),j.error("Failed to load events")}finally{g(!1)}},L=t=>{const r={meetup:{color:"from-blue-500 to-cyan-600",bg:"bg-blue-50 dark:bg-blue-900/20",text:"text-blue-700 dark:text-blue-300",Icon:k,iconColor:"text-blue-500",label:"Community Meetup"},training:{color:"from-purple-500 to-pink-600",bg:"bg-purple-50 dark:bg-purple-900/20",text:"text-purple-700 dark:text-purple-300",Icon:C,iconColor:"text-purple-500",label:"Training Session"},competition:{color:"from-red-500 to-orange-600",bg:"bg-red-50 dark:bg-red-900/20",text:"text-red-700 dark:text-red-300",Icon:G,iconColor:"text-red-500",label:"Competition"},adoption:{color:"from-green-500 to-emerald-600",bg:"bg-green-50 dark:bg-green-900/20",text:"text-green-700 dark:text-green-300",Icon:w,iconColor:"text-green-500",label:"Adoption Event"},social:{color:"from-yellow-500 to-amber-600",bg:"bg-yellow-50 dark:bg-yellow-900/20",text:"text-yellow-700 dark:text-yellow-300",Icon:H,iconColor:"text-yellow-500",label:"Social Gathering"},educational:{color:"from-indigo-500 to-blue-600",bg:"bg-indigo-50 dark:bg-indigo-900/20",text:"text-indigo-700 dark:text-indigo-300",Icon:C,iconColor:"text-indigo-500",label:"Educational"},other:{color:"from-gray-500 to-slate-600",bg:"bg-gray-50 dark:bg-gray-700",text:"text-gray-700 dark:text-gray-300",Icon:N,iconColor:"text-gray-500",label:"Special Event"}};return r[t]||r.other},D=t=>{const r={upcoming:{color:"text-green-600 dark:text-green-400",bg:"bg-green-100 dark:bg-green-900/30",label:"Upcoming"},ongoing:{color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-100 dark:bg-blue-900/30",label:"Live Now"},completed:{color:"text-gray-600 dark:text-gray-400",bg:"bg-gray-100 dark:bg-gray-700",label:"Completed"},cancelled:{color:"text-red-600 dark:text-red-400",bg:"bg-red-100 dark:bg-red-900/30",label:"Cancelled"}};return r[t]||r.upcoming},P=t=>{if(!t)return"Invalid Date";const r=new Date(t);return isNaN(r.getTime())?"Invalid Date":r.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})},$=t=>t?new Date(`1970-01-01T${t}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"TBA",u=t=>{if(!t)return!1;const r=new Date,d=(new Date(t)-r)/(1e3*60*60);return d<=24&&d>0},U=t=>{j.success("Event created successfully! 🎉"),m("browse"),b()},o=t=>{m(t);const r=new URL(window.location);t==="browse"?r.searchParams.delete("view"):r.searchParams.set("view",t),window.history.pushState({},"",r)},i=E.filter(t=>{var a;if(!x)return!0;const r=x.toLowerCase();return t.title.toLowerCase().includes(r)||t.description&&t.description.toLowerCase().includes(r)||((a=t.garden)==null?void 0:a.name)&&t.garden.name.toLowerCase().includes(r)});return I?e.jsx(q,{}):p==="create"?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 pb-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 pt-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("button",{onClick:()=>o("browse"),className:"inline-flex items-center space-x-2 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",children:[e.jsx("span",{children:"←"}),e.jsx("span",{children:"Back to Events"})]})}),e.jsx(J,{onEventCreated:U,onCancel:()=>o("browse")})]})}):p==="manage"?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsx("div",{className:"bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 dark:from-indigo-700 dark:via-purple-700 dark:to-pink-700 mx-4 mt-4 rounded-3xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Manage Events ⚙️"}),e.jsx("p",{className:"text-indigo-100 dark:text-indigo-200",children:"Control your events"})]}),e.jsx("button",{onClick:()=>o("browse"),className:"p-2 bg-white bg-opacity-20 rounded-xl hover:bg-opacity-30 transition-colors",children:"← Back"})]})}),e.jsx("div",{className:"p-4",children:e.jsx(K,{})})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-lg mx-auto lg:max-w-7xl",children:[e.jsxs("div",{className:"lg:hidden bg-gradient-to-br from-orange-600 via-red-600 to-pink-700 dark:from-orange-700 dark:via-red-700 dark:to-pink-800 mx-4 mt-4 rounded-3xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Events Hub 🎉"}),e.jsx("p",{className:"text-orange-100 dark:text-orange-200",children:"Discover amazing dog events"})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-3xl",children:"📅"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-2xl p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:i.length}),e.jsx("div",{className:"text-xs text-orange-100 dark:text-orange-200",children:"Total Events"})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-2xl p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:i.filter(t=>t.status==="upcoming").length}),e.jsx("div",{className:"text-xs text-orange-100 dark:text-orange-200",children:"Upcoming"})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-2xl p-3 text-center",children:[e.jsx("div",{className:"text-lg font-bold",children:i.filter(t=>u(t.eventDate)).length}),e.jsx("div",{className:"text-xs text-orange-100 dark:text-orange-200",children:"Today"})]})]})]}),e.jsxs("div",{className:"px-4 py-6",children:[l&&e.jsxs("div",{className:"flex space-x-3 mb-6",children:[e.jsxs("button",{onClick:()=>o("create"),className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-2xl font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Event"})]}),e.jsx("button",{onClick:()=>o("manage"),className:"px-4 py-3 bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white rounded-2xl hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors",children:e.jsx(W,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx(X,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search events...",value:x,onChange:t=>A(t.target.value),className:"w-full pl-12 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-2xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsx("div",{className:"flex space-x-1 bg-gray-100 dark:bg-gray-800 rounded-2xl p-1 mb-6 overflow-x-auto",children:[{key:"upcoming",label:"Upcoming",icon:"🔜"},{key:"ongoing",label:"Live",icon:"🔴"},{key:"completed",label:"Past",icon:"✅"}].map(t=>e.jsxs("button",{onClick:()=>T({...n,status:t.key}),className:`flex items-center space-x-2 px-4 py-2 rounded-xl font-medium transition-all duration-200 whitespace-nowrap ${n.status===t.key?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx("span",{children:t.icon}),e.jsx("span",{className:"text-sm",children:t.label})]},t.key))}),i.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-12 border border-gray-100 dark:border-gray-700",children:[e.jsx("div",{className:"text-6xl mb-4",children:"📅"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No events found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:l?"Create your first event to get started!":"Check back later for upcoming events."}),l&&e.jsx("button",{onClick:()=>o("create"),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-6 py-3 rounded-2xl font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200",children:"Create First Event"})]})}):e.jsx("div",{className:"space-y-4",children:i.map(t=>{var v,f;const r=L(t.eventType),a=D(t.status),{Icon:d,iconColor:M}=r;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl overflow-hidden border border-gray-200 dark:border-gray-700 shadow-md hover:shadow-xl transition-shadow duration-300",children:[e.jsx("div",{className:`h-2 bg-gradient-to-r ${r.color}`}),e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{className:`h-8 w-8 ${M}`}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-white line-clamp-1",children:t.title}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${r.bg} ${r.text}`,children:r.label})]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${a.bg} ${a.color} font-medium`,children:a.label}),u(t.eventDate)&&e.jsx("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs px-2 py-1 rounded-full animate-pulse",children:"🔥 Starting Soon"})]})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-4 line-clamp-2 h-10",children:t.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-500 dark:text-gray-400 mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{children:P(t.eventDate)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:$(t.startTime)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{className:"line-clamp-1",children:((v=t.garden)==null?void 0:v.name)||"TBA"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(k,{className:"w-4 h-4 text-gray-400"}),e.jsxs("span",{children:[((f=t.participants)==null?void 0:f.length)||0," attending"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-100 dark:border-gray-700 pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{className:"flex items-center space-x-1 text-gray-500 hover:text-red-500 transition-colors",children:[e.jsx(w,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Like"})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-500 hover:text-yellow-500 transition-colors",children:[e.jsx(N,{className:"w-5 h-5"}),e.jsx("span",{className:"text-xs font-medium",children:"Save"})]})]}),e.jsx(R,{to:`/events/${t._id}`,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-semibold transition-colors shadow-sm hover:shadow-md",children:"View Details"})]})]})]},t._id)})})]}),e.jsx("div",{className:"hidden lg:block px-8 py-8",children:e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"Desktop Events layout coming soon..."})})]})})};export{ye as default};
