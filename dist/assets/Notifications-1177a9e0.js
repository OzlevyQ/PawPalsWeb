import{u as F,t as D,j as e,e as l}from"./index-d63ee538.js";import{r as t}from"./vendor-021dee49.js";import{N as I}from"./SkeletonLoading-3b438a19.js";import{B as $}from"./BellIcon-d89f06db.js";import{C as q}from"./CheckCircleIcon-ad35d564.js";import{M as O}from"./MagnifyingGlassIcon-f062adc4.js";import{C as P}from"./ClockIcon-d6d0aaad.js";import{E as U}from"./EyeIcon-6ff4a41f.js";import{T as G}from"./TrashIcon-e750183e.js";import"./utils-917b1704.js";import"./router-3052588b.js";function H({title:o,titleId:s,...x},n){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},x),o?t.createElement("title",{id:s},o):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.143 17.082a24.248 24.248 0 0 0 3.844.148m-3.844-.148a23.856 23.856 0 0 1-5.455-1.31 8.964 8.964 0 0 0 2.3-5.542m3.155 6.852a3 3 0 0 0 5.667 1.97m1.965-2.277L21 21m-4.225-4.225a23.81 23.81 0 0 0 3.536-1.003A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6.53 6.53m10.245 10.245L6.53 6.53M3 3l3.53 3.53"}))}const J=t.forwardRef(H),V=J,le=()=>{F();const{notifications:o,unreadCount:s,loading:x,error:n,loadNotifications:y,markAsRead:p,markAllAsRead:k,deleteNotification:j}=D(),[g,v]=t.useState("all"),[i,N]=t.useState("all"),[d,w]=t.useState(""),[c,C]=t.useState(1),[M,A]=t.useState(!0);t.useEffect(()=>{_()},[g,i,c]);const _=async()=>{const r={page:c,limit:20,unreadOnly:g==="unread",type:i!=="all"?i:void 0};try{const a=await y(r);a&&a.notifications.length===0&&c>1&&A(!1)}catch(a){console.error("Error loading notifications:",a)}},R=async r=>{await p(r)?l.success("Notification marked as read",{position:"bottom-right",autoClose:2e3,hideProgressBar:!0}):l.error("Failed to mark as read")},S=async()=>{await k()?l.success("All notifications marked as read",{position:"bottom-right",autoClose:2e3,hideProgressBar:!0}):l.error("Failed to mark all as read")},E=async r=>{await j(r)?l.success("Notification deleted",{position:"bottom-right",autoClose:2e3,hideProgressBar:!0}):l.error("Failed to delete notification")},L=r=>({friend_request:"👤",friend_request_accepted:"✨",new_message:"💬",event_registration:"🎉",event_reminder:"⏰",garden_update:"🌿",system:"🔔"})[r]||"🔔",T=r=>{const a=new Date(r),u=new Date-a,h=Math.floor(u/6e4),b=Math.floor(u/36e5),f=Math.floor(u/864e5);return h<1?"Just now":h<60?`${h}m ago`:b<24?`${b}h ago`:f<7?`${f}d ago`:a.toLocaleDateString("en-US",{month:"short",day:"numeric"})},m=o.filter(r=>{if(d){const a=d.toLowerCase();return r.title.toLowerCase().includes(a)||r.content.toLowerCase().includes(a)}return!0}),B=[{value:"all",label:"All Types"},{value:"friend_request",label:"Friend Requests"},{value:"new_message",label:"Messages"},{value:"event_registration",label:"Events"},{value:"garden_update",label:"Garden Updates"}];return x?e.jsx(I,{}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-xl flex items-center justify-center",children:e.jsx($,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Notifications"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:s>0?`${s} unread notifications`:"All caught up!"})]})]}),s>0&&e.jsxs("button",{onClick:S,className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-xl transition-colors",children:[e.jsx(q,{className:"w-4 h-4"}),"Mark all read"]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search notifications...",value:d,onChange:r=>w(r.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),e.jsxs("select",{value:g,onChange:r=>v(r.target.value),className:"px-3 py-2.5 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm min-w-[140px]",children:[e.jsx("option",{value:"all",children:"All Notifications"}),e.jsx("option",{value:"unread",children:"Unread Only"}),e.jsx("option",{value:"read",children:"Read Only"})]}),e.jsx("select",{value:i,onChange:r=>N(r.target.value),className:"px-3 py-2.5 border border-gray-200 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm min-w-[140px]",children:B.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]})})]}),n&&e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl p-4 mb-6",children:e.jsx("p",{className:"text-red-800 dark:text-red-200 text-sm",children:n})}),m.length===0?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(V,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No notifications found"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:d?"Try adjusting your search terms":"You're all caught up! Check back later for updates."})]}):e.jsxs("div",{className:"space-y-3",children:[m.map(r=>e.jsx("div",{className:`bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4 transition-all hover:shadow-md ${r.isRead?"":"ring-2 ring-blue-100 dark:ring-blue-900/30 bg-blue-50/30 dark:bg-blue-900/10"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("div",{className:"w-10 h-10 bg-gray-50 dark:bg-gray-700 rounded-full border border-gray-200 dark:border-gray-600 flex items-center justify-center text-lg",children:L(r.type)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"text-base font-medium text-gray-900 dark:text-white",children:r.title}),!r.isRead&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 mt-2"})]}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-3 leading-relaxed",children:r.content}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(P,{className:"w-3 h-3"}),T(r.createdAt)]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[!r.isRead&&e.jsxs("button",{onClick:()=>R(r._id),className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded-lg transition-colors font-medium",children:[e.jsx(U,{className:"w-3 h-3"}),"Mark read"]}),e.jsxs("button",{onClick:()=>E(r._id),className:"inline-flex items-center gap-1 px-3 py-1.5 text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors font-medium",children:[e.jsx(G,{className:"w-3 h-3"}),"Delete"]})]})]})]})]})},r._id)),M&&m.length>=20&&e.jsx("div",{className:"text-center py-6",children:e.jsx("button",{onClick:()=>C(c+1),className:"inline-flex items-center gap-2 px-6 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-medium",children:"Load More Notifications"})})]})]})})};export{le as default};
