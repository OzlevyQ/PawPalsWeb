import{k as r}from"./index-d63ee538.js";class l{async getEntries(e={}){return(await r.get("/dog-journal",{params:e})).data}async getEntry(e){return(await r.get(`/dog-journal/${e}`)).data}async createEntry(e,t=[]){const s=new FormData;return Object.keys(e).forEach(n=>{n==="location"||n==="metDog"||n==="interactionNotes"?s.append(n,JSON.stringify(e[n])):n==="tags"&&Array.isArray(e[n])?e[n].forEach(a=>s.append("tags[]",a)):s.append(n,e[n])}),t.forEach((n,a)=>{s.append("images",n.file),n.caption&&s.append(`imageCaption${a}`,n.caption)}),(await r.post("/dog-journal",s,{headers:{"Content-Type":"multipart/form-data"}})).data}async updateEntry(e,t,s=[]){const o=new FormData;return Object.keys(t).forEach(a=>{a==="location"||a==="metDog"||a==="interactionNotes"?o.append(a,JSON.stringify(t[a])):a==="tags"&&Array.isArray(t[a])?t[a].forEach(i=>o.append("tags[]",i)):a!=="images"&&o.append(a,t[a])}),s.forEach((a,i)=>{o.append("images",a.file),a.caption&&o.append(`imageCaption${i}`,a.caption)}),(await r.put(`/dog-journal/${e}`,o,{headers:{"Content-Type":"multipart/form-data"}})).data}async deleteEntry(e){return(await r.delete(`/dog-journal/${e}`)).data}async getAlbums(){return(await r.get("/dog-journal/albums")).data}async getEntriesByAlbum(e,t={}){return(await r.get(`/dog-journal/albums/${e}`,{params:t})).data}async deleteImage(e,t){return(await r.delete(`/dog-journal/${e}/images/${t}`)).data}async getDashboardStats(){return(await r.get("/dog-journal/stats")).data}async searchEntries(e,t={}){const s={search:e,...t};return this.getEntries(s)}async getEntriesByDateRange(e,t,s={}){return this.getEntries({...s,startDate:e.toISOString(),endDate:t.toISOString()})}async getRecentEntries(e=5){return this.getEntries({limit:e,sortBy:"createdAt",sortOrder:"desc"})}async getPopularAlbums(){return(await this.getAlbums()).albums.filter(t=>t.count>0).sort((t,s)=>s.count-t.count)}validateEntry(e){const t={};return!e.title||e.title.trim().length===0?t.title="Title is required":e.title.length>200&&(t.title="Title must be less than 200 characters"),!e.description||e.description.trim().length===0?t.description="Description is required":e.description.length>2e3&&(t.description="Description must be less than 2000 characters"),(!e.metDog||!e.metDog.name||e.metDog.name.trim().length===0)&&(t.metDogName="Dog name is required"),e.album||(t.album="Album selection is required"),e.album==="Custom"&&(!e.customAlbumName||e.customAlbumName.trim().length===0)&&(t.customAlbumName="Custom album name is required"),e.relationshipRating&&(e.relationshipRating<1||e.relationshipRating>5)&&(t.relationshipRating="Rating must be between 1 and 5"),{isValid:Object.keys(t).length===0,errors:t}}formatEntryForDisplay(e){var t,s,o;return{...e,displayDate:new Date(e.meetingDate).toLocaleDateString(),displayAlbum:e.album==="Custom"?e.customAlbumName:e.album,mainImage:((t=e.images)==null?void 0:t.find(n=>n.isMainImage))||((s=e.images)==null?void 0:s[0]),imageCount:((o=e.images)==null?void 0:o.length)||0,timeAgo:this.getTimeAgo(new Date(e.createdAt))}}getTimeAgo(e){const s=Math.abs(new Date-e),o=Math.floor(s/(1e3*60*60*24)),n=Math.floor(s/(1e3*60*60)),a=Math.floor(s/(1e3*60));return o>0?`${o} day${o>1?"s":""} ago`:n>0?`${n} hour${n>1?"s":""} ago`:a>0?`${a} minute${a>1?"s":""} ago`:"Just now"}getImageUrl(e){return e?(e.startsWith("http"),e):null}}const m=new l;export{m as d};
