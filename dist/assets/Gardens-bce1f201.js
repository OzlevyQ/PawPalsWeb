import{u as ue,j as e,X as Me,c as B,e as N,f as V,Q as Ee,h as ce,M as T,F as Ie,i as ge}from"./index-d63ee538.js";import{r as l}from"./vendor-021dee49.js";import{L as Z}from"./router-3052588b.js";import{gardenService as P}from"./gardenService-8e5619dd.js";import{G as De}from"./SkeletonLoading-3b438a19.js";import{B as W}from"./BellIcon-587118bd.js";import{U as de}from"./UserIcon-725f4b63.js";import{E as _e}from"./EnvelopeIcon-88013258.js";import{I as xe}from"./InformationCircleIcon-c0454e63.js";import{C as Ae}from"./CheckIcon-3891f6eb.js";import{B as H}from"./BellIcon-d89f06db.js";import{M as Fe}from"./MagnifyingGlassIcon-f062adc4.js";import{G as Pe}from"./GlobeAltIcon-f8e2b057.js";import{L as Re}from"./LockClosedIcon-973e8386.js";import{P as me}from"./PlusIcon-d0c3f3f8.js";import{A as Ge}from"./ArrowPathIcon-a9aaab64.js";import{S as $e}from"./StarIcon-7759d6c0.js";import{C as Oe}from"./ClockIcon-d6d0aaad.js";import"./utils-917b1704.js";function Te({title:t,titleId:i,...m},x){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":i},m),t?l.createElement("title",{id:i},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const He=l.forwardRef(Te),Be=He;function Ue({title:t,titleId:i,...m},x){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":i},m),t?l.createElement("title",{id:i},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Ve=l.forwardRef(Ue),Ze=Ve;function We({title:t,titleId:i,...m},x){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:x,"aria-labelledby":i},m),t?l.createElement("title",{id:i},t):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6a2.25 2.25 0 0 1-2.25-2.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6a2.25 2.25 0 0 1 2.25-2.25H18A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25a2.25 2.25 0 0 1-2.25-2.25V6ZM13.5 15.75a2.25 2.25 0 0 1 2.25-2.25H18a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"}))}const qe=l.forwardRef(We),ze=qe,Qe=({isOpen:t,onClose:i,garden:m,onSubscriptionChange:x})=>{const{user:n}=ue(),[p,g]=l.useState(!1),[h,v]=l.useState(!1),[L,M]=l.useState({events:!0,promotions:!0,announcements:!0,maintenance:!0}),[E,j]=l.useState({events:!0,promotions:!0,announcements:!0,maintenance:!0});l.useEffect(()=>{t&&m&&_()},[t,m]);const _=async()=>{try{const o=await P.getNewsletterStatus(m._id);v(o.isSubscribed),o.preferences&&(M(o.preferences),j(o.preferences))}catch(o){console.error("Error loading subscription status:",o)}},k=async()=>{var o,d;if(!n){N.error("Please log in to subscribe to newsletters");return}g(!0);try{await P.subscribeToNewsletter(m._id,E),v(!0),M(E),N.success("Successfully subscribed to newsletter!"),x==null||x(!0),i()}catch(w){console.error("Error subscribing:",w),N.error(((d=(o=w.response)==null?void 0:o.data)==null?void 0:d.error)||"Failed to subscribe to newsletter")}finally{g(!1)}},y=async()=>{var o,d;g(!0);try{await P.unsubscribeFromNewsletter(m._id),v(!1),N.success("Successfully unsubscribed from newsletter"),x==null||x(!1),i()}catch(w){console.error("Error unsubscribing:",w),N.error(((d=(o=w.response)==null?void 0:o.data)==null?void 0:d.error)||"Failed to unsubscribe from newsletter")}finally{g(!1)}},I=(o,d)=>{j(w=>({...w,[o]:d}))};return!t||!m?null:e.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-start justify-center pt-16 pb-8",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:i}),e.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-3xl shadow-2xl max-w-md w-full mx-4 max-h-[85vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(W,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Newsletter Subscription"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:m.name})]})]}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx(Me,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-2xl",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx(de,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Subscription Details"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_e,{className:"h-4 w-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:n==null?void 0:n.email})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(de,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n==null?void 0:n.firstName," ",n==null?void 0:n.lastName]})]}),(n==null?void 0:n.dogs)&&n.dogs.length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{className:"h-4 w-4 text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Dog: ",n.dogs[0].name]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsx(xe,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Subscription Status"})]}),e.jsx("div",{className:`p-3 rounded-xl ${h?"bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-400":"bg-gray-50 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[h?e.jsx(Ae,{className:"h-4 w-4"}):e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:h?"Subscribed":"Not Subscribed"})]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(H,{className:"h-5 w-5 text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"What would you like to receive?"})]}),e.jsx("div",{className:"space-y-3",children:[{key:"events",label:"Events & Activities",description:"Notifications about upcoming events and activities"},{key:"promotions",label:"Promotions & Offers",description:"Special offers and promotional content"},{key:"announcements",label:"General Announcements",description:"Important updates and news"},{key:"maintenance",label:"Maintenance Updates",description:"Information about closures and maintenance"}].map(o=>e.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:E[o.key],onChange:d=>I(o.key,d.target.checked),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o.label}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:o.description})]})]},o.key))})]}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-2xl",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(xe,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("p",{className:"font-medium mb-1",children:"Newsletter Information"}),e.jsx("p",{className:"text-xs",children:"You can unsubscribe at any time using the link in our emails or by clicking the bell icon again. We respect your privacy and will only send relevant updates."})]})]})}),e.jsx("div",{className:"flex space-x-3",children:h?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:y,disabled:p,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:p?"Unsubscribing...":"Unsubscribe"}),e.jsx("button",{onClick:k,disabled:p,className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:p?"Updating...":"Update Preferences"})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:i,className:"flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-xl hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:k,disabled:p,className:"flex-1 px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium",children:p?"Subscribing...":"Subscribe"})]})})]})]})]})},bs=()=>{const{user:t,isAuthenticated:i}=ue(),[m,x]=l.useState([]),[n,p]=l.useState([]),[g,h]=l.useState([]),[v,L]=l.useState(!0),[M,E]=l.useState(""),[j,_]=l.useState("all"),[k,y]=l.useState("cards"),[I,o]=l.useState(10),[d,w]=l.useState(5),[b,he]=l.useState(null),[q,z]=l.useState(!1),[D,Q]=l.useState(!1),[X,J]=l.useState(!1),[pe,Y]=l.useState(!1),[U,be]=l.useState(null),[K,ee]=l.useState({}),[se,te]=l.useState(!1),fe=[5,10,15,20,25,50],S=[2,5,10,15,25,50];l.useEffect(()=>{we(),ae(),i&&ke();const s=setInterval(()=>{Ne()},5*60*1e3);return()=>clearInterval(s)},[i]),l.useEffect(()=>{i&&n.length>0&&Ce()},[i,n]),l.useEffect(()=>{b&&n.length>0&&je()},[b,n,D,d]);const ae=async()=>{if(!navigator.geolocation){console.log("🚫 Geolocation not supported");return}console.log("📍 Requesting location permission..."),z(!0);try{const s=await new Promise((r,c)=>{navigator.geolocation.getCurrentPosition(r,c,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),a={latitude:s.coords.latitude,longitude:s.coords.longitude,accuracy:s.coords.accuracy};console.log("✅ Location detected:",a),console.log("🏞️ Total gardens before filter:",n.length),he(a),Q(!0)}catch(s){console.error("❌ Error getting location:",s.message),console.log('💡 Try the "Test Location" button to test with sample coordinates')}finally{z(!1)}},ye=(s,a,r,c)=>{const u=Math.abs(r-s),f=Math.abs(c-a);return Math.sqrt(u*u+f*f)*111},ve=(s,a,r,c)=>{const f=(r-s)*Math.PI/180,A=(c-a)*Math.PI/180,F=Math.sin(f/2)*Math.sin(f/2)+Math.cos(s*Math.PI/180)*Math.cos(r*Math.PI/180)*Math.sin(A/2)*Math.sin(A/2);return 6371*(2*Math.atan2(Math.sqrt(F),Math.sqrt(1-F)))},je=()=>{if(!b){console.log("📍 No user location available");return}console.log("🔄 Updating gardens with distance calculation..."),console.log("📍 User location:",b),console.log("🏞️ Total gardens to process:",n.length);const s=n.filter(u=>{var G,$;const f=($=(G=u.location)==null?void 0:G.coordinates)==null?void 0:$.coordinates;if(!f||!Array.isArray(f)||f.length<2)return!1;const[A,F]=f;return ye(b.latitude,b.longitude,F,A)<=d*1.5});console.log(`🎯 Quick filter: ${s.length} gardens within rough ${d*1.5}km`);const a=s.slice(0,30),r=a.map(u=>{var G,$;const f=($=(G=u.location)==null?void 0:G.coordinates)==null?void 0:$.coordinates,[A,F]=f,O=ve(b.latitude,b.longitude,F,A);return a.indexOf(u)<10&&console.log(`🏞️ ${u.name}: ${O.toFixed(2)}km away`),{...u,distance:O}});let c=r;D&&(c=r.filter(u=>u.distance<=d).sort((u,f)=>u.distance-f.distance),console.log(`🎯 Final result: ${c.length} gardens within ${d}km`)),x(c)},we=async()=>{try{L(!0);let a=(await P.getAllGardens()).gardens||[];a.length===0&&(console.log("📍 No gardens found, loading sample data..."),a=ne()),p(a),x(a)}catch(s){console.error("Error loading gardens:",s),console.log("📍 Loading sample data due to error...");const a=ne();p(a),x(a)}finally{L(!1)}},Ne=async()=>{try{const a=(await P.getAllGardens()).gardens||[];p(a),D||x(a)}catch(s){console.error("Error refreshing gardens:",s)}},ke=async()=>{if(i)try{const s=await V.getFavorites();h(s.favorites||[])}catch(s){console.error("Error loading favorites:",s),N.error("Failed to load favorites.")}},re=async s=>{if(!i){N.info("Please log in to add to favorites.");return}try{if(g.some(r=>r._id===s))await V.removeFavorite(s),h(r=>r.filter(c=>c._id!==s)),N.success("Garden removed from favorites!");else{await V.addFavorite(s);const r=n.find(c=>c._id===s);r&&h(c=>[...c,r]),N.success("Garden added to favorites!")}}catch(a){console.error("Error toggling favorite:",a),N.error("Failed to toggle favorite.")}},le=s=>{if(!i){N.info("Please log in to manage newsletter subscriptions.");return}be(s),Y(!0)},Se=(s,a)=>{ee(r=>({...r,[s]:a}))},Ce=async()=>{if(!(!i||n.length===0))try{const s={},a=n.map(async r=>{try{const c=await P.getNewsletterStatus(r._id);s[r._id]=c.isSubscribed}catch(c){console.warn(`Newsletter status check failed for garden ${r._id}:`,c.message),s[r._id]=!1}});await Promise.all(a),ee(s)}catch(s){console.error("Error loading newsletter statuses:",s)}},ne=()=>[{_id:"tel_aviv_democratic",name:"Democratic Dog Park",description:"A spacious dog park in the heart of Tel Aviv",type:"public",location:{address:"Democratic Street, Tel Aviv",city:"Tel Aviv",coordinates:{type:"Point",coordinates:[34.7818,32.0853]}},capacity:{maxDogs:25},currentOccupancy:12,amenities:["water","shade","parking","lighting"],statistics:{averageRating:4.5,totalReviews:89},openingHours:{monday:{open:"06:00",close:"22:00",closed:!1},tuesday:{open:"06:00",close:"22:00",closed:!1},wednesday:{open:"06:00",close:"22:00",closed:!1},thursday:{open:"06:00",close:"22:00",closed:!1},friday:{open:"06:00",close:"22:00",closed:!1},saturday:{open:"06:00",close:"22:00",closed:!1},sunday:{open:"06:00",close:"22:00",closed:!1}}},{_id:"jerusalem_sacher",name:"Sacher Dog Park",description:"Beautiful dog park in Sacher Park with great views",type:"public",location:{address:"Sacher Park, Jerusalem",city:"Jerusalem",coordinates:{type:"Point",coordinates:[35.2345,31.7767]}},capacity:{maxDogs:30},currentOccupancy:8,amenities:["water","shade","scenic_view","benches"],statistics:{averageRating:4.6,totalReviews:156},openingHours:{monday:{open:"06:00",close:"22:00",closed:!1},tuesday:{open:"06:00",close:"22:00",closed:!1},wednesday:{open:"06:00",close:"22:00",closed:!1},thursday:{open:"06:00",close:"22:00",closed:!1},friday:{open:"06:00",close:"22:00",closed:!1},saturday:{open:"06:00",close:"22:00",closed:!1},sunday:{open:"06:00",close:"22:00",closed:!1}}},{_id:"haifa_carmel",name:"Carmel Dog Park",description:"Mountain dog park with panoramic views",type:"public",location:{address:"Mount Carmel, Haifa",city:"Haifa",coordinates:{type:"Point",coordinates:[34.9896,32.794]}},capacity:{maxDogs:35},currentOccupancy:15,amenities:["water","shade","scenic_view","parking"],statistics:{averageRating:4.7,totalReviews:203},openingHours:{monday:{open:"06:00",close:"22:00",closed:!1},tuesday:{open:"06:00",close:"22:00",closed:!1},wednesday:{open:"06:00",close:"22:00",closed:!1},thursday:{open:"06:00",close:"22:00",closed:!1},friday:{open:"06:00",close:"22:00",closed:!1},saturday:{open:"06:00",close:"22:00",closed:!1},sunday:{open:"06:00",close:"22:00",closed:!1}}}],ie=()=>{const s=S.indexOf(d),a=Math.min(s+1,S.length-1);w(S[a])},C=m.filter(s=>{var r,c;const a=s.name.toLowerCase().includes(M.toLowerCase())||((c=(r=s.location)==null?void 0:r.address)==null?void 0:c.toLowerCase().includes(M.toLowerCase()));return j==="all"?a:j==="public"?a&&s.type==="public":j==="private"?a&&s.type==="private":j==="favorites"?a&&g.some(u=>u._id===s._id):a}).sort((s,a)=>{const r=g.some(u=>u._id===s._id),c=g.some(u=>u._id===a._id);return r&&!c?-1:!r&&c?1:0}),R=C.slice(0,I),oe=(s,a)=>{const r=s/a*100;return r>=90?{color:"text-red-600",bg:"bg-red-100 dark:bg-red-900",label:"Very Busy"}:r>=70?{color:"text-orange-600",bg:"bg-orange-100 dark:bg-orange-900",label:"Busy"}:r>=40?{color:"text-yellow-600",bg:"bg-yellow-100 dark:bg-yellow-900",label:"Moderate"}:{color:"text-green-600",bg:"bg-green-100 dark:bg-green-900",label:"Quiet"}},Le=[{name:"Total Parks",value:C.length},{name:"Active Dogs",value:C.reduce((s,a)=>s+(a.currentOccupancy||0),0)},{name:"Top Rated",value:C.filter(s=>{var a;return((a=s.statistics)==null?void 0:a.averageRating)>=4}).length}];return v?e.jsx(De,{}):e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"max-w-lg mx-auto lg:max-w-7xl",children:[e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700 rounded-3xl p-6 text-white shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-4 -right-4 text-8xl opacity-10",children:"🐾"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Discover Parks"}),e.jsx("p",{className:"text-blue-100",children:"Find the perfect spot for your furry friend"})]}),e.jsx(Z,{to:"/scan",className:"bg-white bg-opacity-20 backdrop-blur-sm hover:bg-opacity-30 rounded-full p-3 transition-all duration-200 transform hover:scale-105",children:e.jsx(Ee,{className:"h-6 w-6 text-white"})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4 mt-4 text-center",children:Le.map(s=>e.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-3",children:[e.jsx("div",{className:"text-2xl font-bold",children:s.value}),e.jsx("div",{className:"text-xs text-blue-100",children:s.name})]},s.name))})]})]})}),e.jsxs("div",{className:"px-4 pb-6",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx(Fe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search parks...",value:M,onChange:s=>E(s.target.value),className:"w-full pl-10 pr-4 py-3 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-3xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1",children:[e.jsxs("button",{onClick:()=>y("cards"),className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all ${k==="cards"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(ze,{className:"h-4 w-4 mr-1"}),"Cards"]}),e.jsxs("button",{onClick:()=>y("list"),className:`flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all ${k==="list"?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,children:[e.jsx(Ze,{className:"h-4 w-4 mr-1"}),"List"]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>J(!X),className:"flex items-center px-4 py-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl text-sm font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-all",children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Show ",I,e.jsx(ce,{className:"h-4 w-4 ml-1"})]}),X&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-xl shadow-lg z-10",children:e.jsxs("div",{className:"p-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Display Count"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:fe.map(s=>e.jsx("button",{onClick:()=>{o(s),J(!1)},className:`px-3 py-1 rounded-lg text-sm font-medium transition-all ${I===s?"bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:s},s))})]})})]})]}),b&&e.jsxs("div",{className:"mb-4 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Showing parks within ",d,"km"]}),e.jsx("button",{onClick:()=>Q(!D),className:`px-3 py-1 rounded-lg text-sm font-medium transition-all ${D?"bg-purple-100 dark:bg-purple-900 text-purple-600 dark:text-purple-400":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400"}`,children:D?"By Distance":"All Parks"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[[2,5,10].map(s=>e.jsxs("button",{onClick:()=>w(s),className:`px-3 py-1 rounded-lg text-sm font-medium transition-all ${d===s?"bg-purple-500 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[s,"km"]},s)),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>te(!se),className:"px-3 py-1 rounded-lg text-sm font-medium bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-600 transition-all flex items-center",children:["Edit",e.jsx(ce,{className:"h-4 w-4 ml-1"})]}),se&&e.jsx("div",{className:"absolute top-full left-0 mt-1 w-32 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg z-10",children:e.jsx("div",{className:"p-2",children:S.filter(s=>![2,5,10].includes(s)).map(s=>e.jsxs("button",{onClick:()=>{w(s),te(!1)},className:"w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-all",children:[s,"km"]},s))})})]})]})]}),!b&&!q&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-blue-600 dark:text-blue-400",children:[e.jsx(T,{className:"h-4 w-4 mr-2"}),"Enable location to sort parks by distance"]}),e.jsx("button",{onClick:ae,className:"px-4 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-all",children:"📍 Enable Location"})]})}),q&&e.jsx("div",{className:"mb-4 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-xl border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center text-sm text-orange-600 dark:text-orange-400",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-orange-600 mr-2"}),"Getting your location..."]})}),!b&&m.length>0&&e.jsx("div",{className:"mb-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("div",{className:"text-2xl mr-2",children:"🌍"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Showing all parks"}),e.jsx("div",{className:"text-xs",children:"Enable location to sort by distance"})]})]}),e.jsxs("div",{className:"text-right text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"font-medium",children:[C.length," parks"]}),e.jsx("div",{className:"text-xs",children:"across the area"})]})]})}),!b&&!1,e.jsx("div",{className:"flex space-x-2 bg-gray-100 dark:bg-gray-800 rounded-full p-1 mb-6",children:[{name:"Favorites",type:"favorites",icon:B},{name:"All",type:"all",icon:Pe},{name:"Private",type:"private",icon:Re}].map(s=>{const a=s.icon,r=j===s.type;return e.jsxs("button",{onClick:()=>_(s.type),className:`flex-1 flex justify-center items-center space-x-2 px-4 py-2 rounded-full font-medium text-sm transition-all duration-300 ${r?"bg-white dark:bg-gray-700 text-purple-600 dark:text-purple-300 shadow":"text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700/50"}`,children:[e.jsx(a,{className:"w-5 h-5"}),e.jsx("span",{children:s.name})]},s.type)})}),R.length===0?e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-12 border border-gray-100 dark:border-gray-700 shadow-lg",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),e.jsx("h3",{className:"text-xl font-semibold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"No Parks Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:D&&b?`No parks found within ${d}km of your location.`:"We couldn't find any parks matching your search criteria."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx("button",{onClick:()=>{E(""),_("all")},className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-3xl font-medium hover:from-purple-700 hover:to-pink-700 transition-all shadow-lg",children:"Clear Filters"}),D&&d<S[S.length-1]&&e.jsxs("button",{onClick:ie,className:"inline-flex items-center px-6 py-3 bg-blue-500 text-white rounded-3xl font-medium hover:bg-blue-600 transition-all shadow-lg",children:[e.jsx(me,{className:"h-4 w-4 mr-2"}),"Expand Range"]})]})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`${k==="cards"?"space-y-6":"space-y-3"} w-full overflow-hidden`,children:R.map((s,a)=>k==="cards"?e.jsx(Xe,{garden:s,index:a,getOccupancyStatus:oe,isFavorite:g.some(r=>r._id===s._id),toggleFavorite:re,isNewsletterSubscribed:K[s._id],onNewsletterClick:le},s._id):e.jsx(Je,{garden:s,getOccupancyStatus:oe,isFavorite:g.some(r=>r._id===s._id),toggleFavorite:re,isNewsletterSubscribed:K[s._id],onNewsletterClick:le},s._id))}),R.length<C.length&&e.jsx("div",{className:"text-center mt-8",children:e.jsxs("button",{onClick:()=>o(s=>Math.min(s+10,C.length)),className:"inline-flex items-center px-8 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-3xl font-medium hover:from-purple-600 hover:to-pink-600 transition-all shadow-lg transform hover:scale-105",children:[e.jsx(Ge,{className:"h-5 w-5 mr-2"}),"Load More Parks (",C.length-R.length," remaining)"]})}),D&&b&&R.length===C.length&&C.length>0&&d<S[S.length-1]&&e.jsx("div",{className:"text-center mt-8",children:e.jsxs("button",{onClick:ie,className:"inline-flex items-center px-8 py-3 bg-blue-500 text-white rounded-3xl font-medium hover:bg-blue-600 transition-all shadow-lg transform hover:scale-105",children:[e.jsx(me,{className:"h-5 w-5 mr-2"}),"Expand Range to ",S[S.indexOf(d)+1],"km"]})})]})]}),e.jsx("div",{className:"hidden lg:block px-8 py-8",children:e.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400",children:"Desktop gardens layout coming soon..."})})]}),e.jsx(Qe,{isOpen:pe,onClose:()=>Y(!1),garden:U,onSubscriptionChange:s=>{U&&Se(U._id,s)}})]})},Xe=({garden:t,index:i,getOccupancyStatus:m,isFavorite:x,toggleFavorite:n,isNewsletterSubscribed:p,onNewsletterClick:g})=>{var L,M,E,j,_,k;const h=m(t.currentOccupancy||0,((L=t.capacity)==null?void 0:L.maxDogs)||50),v=i<2&&(t.currentOccupancy||0)>3;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl overflow-hidden shadow-lg border border-gray-100 dark:border-gray-700 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:`relative h-32 ${t.type==="public"?"bg-gradient-to-br from-purple-400 via-pink-400 to-red-400":"bg-gradient-to-br from-purple-500 via-pink-500 to-red-500"}`,children:[e.jsx("div",{className:"absolute top-3 left-3",children:v?e.jsxs("div",{className:"bg-black bg-opacity-50 rounded-full px-3 py-1 flex items-center space-x-1",children:[e.jsx(Ie,{className:"h-4 w-4 text-orange-400"}),e.jsx("span",{className:"text-white text-xs font-medium",children:"Trending now!"})]}):(t.currentOccupancy||0)>0?e.jsx("div",{className:"bg-black bg-opacity-50 rounded-full px-3 py-1 flex items-center space-x-1",children:e.jsxs("span",{className:"text-white text-xs font-medium",children:["⚡ ",t.currentOccupancy," dogs here"]})}):null}),e.jsx("div",{className:"absolute top-3 right-3",children:e.jsx("div",{className:`rounded-full px-3 py-1 ${t.type==="public","bg-white bg-opacity-90 backdrop-blur-sm"}`,children:e.jsx("span",{className:`text-xs font-bold ${t.type==="public"?"text-purple-700":"text-pink-700"}`,children:t.type==="public"?"🌍 Public":"🔒 Private"})})}),t.distance&&e.jsx("div",{className:"absolute bottom-3 left-3",children:e.jsx("div",{className:"bg-black bg-opacity-50 rounded-full px-3 py-1",children:e.jsxs("span",{className:"text-white text-xs font-medium",children:["📍 ",t.distance.toFixed(1),"km away"]})})}),e.jsxs("div",{className:"absolute bottom-3 right-3 flex space-x-2",children:[e.jsx("button",{onClick:()=>n(t._id),className:"p-2 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-all backdrop-blur-sm",children:e.jsx(B,{className:`h-5 w-5 ${x?"text-red-500":"text-white"}`})}),e.jsx("button",{onClick:()=>g(t),className:"p-2 bg-white bg-opacity-20 rounded-full hover:bg-opacity-30 transition-all backdrop-blur-sm",children:p?e.jsx(W,{className:"h-5 w-5 text-blue-500"}):e.jsx(H,{className:"h-5 w-5 text-white"})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:t.name}),((M=t.statistics)==null?void 0:M.averageRating)>0&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx($e,{className:"h-4 w-4 text-yellow-400"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.statistics.averageRating.toFixed(1)})]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mb-3",children:[e.jsx(T,{className:"h-4 w-4 mr-1"}),e.jsx("span",{className:"truncate",children:((E=t.location)==null?void 0:E.address)||"Location not specified"})]}),e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ge,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:[t.currentOccupancy||0," / ",((j=t.capacity)==null?void 0:j.maxDogs)||"No limit"," dogs"]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${h.bg} ${h.color}`,children:h.label})]}),t.amenities&&t.amenities.length>0&&e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.amenities.slice(0,3).map(y=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-50 dark:bg-purple-900 text-purple-700 dark:text-purple-300",children:["✨ ",y]},y)),t.amenities.length>3&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center px-2",children:["+",t.amenities.length-3," more"]})]})}),(t.currentOccupancy||0)>0&&e.jsxs("div",{className:"flex items-center justify-between mb-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-2xl",children:[e.jsxs("div",{className:"flex -space-x-2",children:[((_=t.currentVisitors)==null?void 0:_.slice(0,4).map((y,I)=>{var o;return e.jsx("div",{className:"relative",children:(o=y.dog)!=null&&o.image?e.jsx("img",{src:y.dog.image,alt:y.dog.name,className:"h-8 w-8 rounded-full border-2 border-white dark:border-gray-700 object-cover"}):e.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-purple-400 to-pink-500 border-2 border-white dark:border-gray-700 flex items-center justify-center text-sm",children:"🐕"})},I)}))||[...Array(Math.min(4,t.currentOccupancy||0))].map((y,I)=>e.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-purple-400 to-pink-500 border-2 border-white dark:border-gray-700 flex items-center justify-center text-sm",children:"🐕"},I)),(t.currentOccupancy||0)>4&&e.jsxs("div",{className:"h-8 w-8 rounded-full bg-gray-400 border-2 border-white dark:border-gray-700 flex items-center justify-center text-xs text-white font-medium",children:["+",(t.currentOccupancy||0)-4]})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(Oe,{className:"h-3 w-3 mr-1"}),"Active now"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{className:"flex items-center",children:["🐕 ",t.currentOccupancy||0," dogs"]}),((k=t.statistics)==null?void 0:k.averageRating)>0&&e.jsxs("span",{className:"flex items-center",children:["⭐ ",t.statistics.averageRating.toFixed(1)]})]}),e.jsx(Z,{to:`/garden/${t._id}`,className:`px-6 py-2 rounded-2xl font-medium transition-all shadow-lg ${v?"bg-gradient-to-r from-orange-500 to-red-500 text-white hover:from-orange-600 hover:to-red-600":"bg-gradient-to-r from-purple-500 to-pink-500 text-white hover:from-purple-600 hover:to-pink-600"}`,children:(t.currentOccupancy||0)>0?"Join Now":"Visit"})]})]})]})},Je=({garden:t,getOccupancyStatus:i,isFavorite:m,toggleFavorite:x,isNewsletterSubscribed:n,onNewsletterClick:p})=>{var h,v,L;const g=i(t.currentOccupancy||0,((h=t.capacity)==null?void 0:h.maxDogs)||50);return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-100 dark:border-gray-700 hover:shadow-lg transition-all duration-300 overflow-hidden",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between min-w-0",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full flex-shrink-0 ${t.type==="public"?"bg-purple-500":"bg-pink-500"}`}),e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white truncate",children:t.name}),t.distance&&e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-full flex-shrink-0",children:[t.distance.toFixed(1),"km"]})]}),e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 min-w-0 flex-1",children:[e.jsx(T,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:((v=t.location)==null?void 0:v.address)||"Address not specified"})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ge,{className:"h-4 w-4 mr-2 flex-shrink-0"}),e.jsxs("span",{children:[t.currentOccupancy||0," / ",((L=t.capacity)==null?void 0:L.maxDogs)||"No limit"," dogs"]})]}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g.bg} ${g.color} flex-shrink-0`,children:g.label})]})]}),e.jsxs("div",{className:"ml-4 flex-shrink-0 flex flex-col items-end space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>x(t._id),className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-all",children:e.jsx(B,{className:`h-5 w-5 ${m?"text-red-500":"text-gray-400"}`})}),e.jsx("button",{onClick:()=>p(t),className:"p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-all",children:n?e.jsx(W,{className:"h-5 w-5 text-blue-500"}):e.jsx(H,{className:"h-5 w-5 text-gray-400"})})]}),e.jsx(Z,{to:`/garden/${t._id}`,className:"inline-block px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl font-medium hover:from-purple-600 hover:to-pink-600 transition-all whitespace-nowrap",children:"Visit"})]})]})})})};export{bs as default};
