import{K as u,t as T,j as e,N as S,O as x,R as k,D as C}from"./index-d63ee538.js";import{r as g}from"./vendor-021dee49.js";import"./utils-917b1704.js";import"./router-3052588b.js";/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],D=u("smartphone",R);/**
 * @license lucide-react v0.518.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],h=u("test-tube",$),B=()=>{const[o,a]=g.useState([]),[l,f]=g.useState(!1),{createTestNotification:m,requestPermission:p}=T(),i=(t,n,d)=>{a(c=>[...c,{test:t,success:n,message:d,timestamp:new Date}])},N=async()=>{f(!0),a([]);try{i("Permission Request",null,"Checking browser permissions...");const t=await p();i("Permission Request",t,t?"Notification permissions granted":"Notification permissions denied"),i("Create Test Notification",null,"Creating test notification...");const n=await m();i("Create Test Notification",n,n?"Test notification created successfully":"Error creating notification");const d=[{type:"system",title:"System Notification",content:"This is a system notification test"},{type:"new_message",title:"New Message",content:"You received a new message from a friend"},{type:"event_reminder",title:"Event Reminder",content:"Your event starts in one hour"}];for(const{type:s,title:j,content:v}of d){i(`${s} notification`,null,`Creating ${s} notification...`);try{const r=await m(s,j,v);i(`${s} notification`,r,r?`${s} notification created successfully`:`Error creating ${s} notification`)}catch(r){i(`${s} notification`,!1,`Error: ${r.message}`)}}i("WebSocket Connection",null,"Checking WebSocket connection...");const c=!0;i("WebSocket Connection",c,c?"WebSocket connected":"WebSocket not connected")}catch(t){i("General Test",!1,`General error: ${t.message}`)}f(!1)},y=()=>{a([])},b=async()=>{i("Direct Browser Notification",null,"Testing direct browser notification...");try{"Notification"in window?Notification.permission==="granted"?(new Notification("Direct Test Notification",{body:"This is a direct browser notification test for PWA",icon:"/icon-192.png",badge:"/icon-192.png",tag:"direct-test"}),i("Direct Browser Notification",!0,"Direct notification sent successfully!")):await Notification.requestPermission()==="granted"?(new Notification("Permission Granted!",{body:"Now you should receive notifications",icon:"/icon-192.png"}),i("Direct Browser Notification",!0,"Permission granted and notification sent!")):i("Direct Browser Notification",!1,"Notification permission denied"):i("Direct Browser Notification",!1,"Notifications not supported in this browser")}catch(t){i("Direct Browser Notification",!1,`Error: ${t.message}`)}},w=async()=>{i("Service Notification",null,"Testing notification through service...");try{const t={title:"Service Test Notification",content:"This is a test through the notification service",type:"test"};await C.showBrowserNotification(t),i("Service Notification",!0,"Service notification called successfully!")}catch(t){i("Service Notification",!1,`Service error: ${t.message}`)}};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(h,{className:"text-blue-600",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Notification System Testing"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-gray-600 mb-4",children:"This tool tests the notification system functionality, including browser permissions, notification creation from MongoDB and WebSocket connection."}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:N,disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(S,{size:16}),l?"Running Tests...":"Run Full Tests"]}),e.jsxs("button",{onClick:b,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2",children:[e.jsx(D,{size:16}),"Direct Notification"]}),e.jsxs("button",{onClick:w,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 flex items-center gap-2",children:[e.jsx(h,{size:16}),"Service Test"]}),o.length>0&&e.jsxs("button",{onClick:y,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 flex items-center gap-2",children:[e.jsx(x,{size:16}),"Clear Results"]})]})]}),o.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Test Results:"}),o.map((t,n)=>e.jsxs("div",{className:`p-3 rounded-lg border-r-4 ${t.success===null?"bg-yellow-50 border-yellow-400":t.success?"bg-green-50 border-green-400":"bg-red-50 border-red-400"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[t.success===null?e.jsx("div",{className:"w-4 h-4 border-2 border-yellow-400 border-t-transparent rounded-full animate-spin"}):t.success?e.jsx(k,{className:"text-green-600",size:16}):e.jsx(x,{className:"text-red-600",size:16}),e.jsx("span",{className:"font-medium text-gray-800",children:t.test}),e.jsx("span",{className:"text-xs text-gray-500",children:t.timestamp.toLocaleTimeString("en-US")})]}),e.jsx("p",{className:`mt-1 text-sm ${t.success===null?"text-yellow-700":t.success?"text-green-700":"text-red-700"}`,children:t.message})]},n)),!l&&e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Summary:"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{className:"text-green-600",children:["✓ ",o.filter(t=>t.success===!0).length," passed"]}),e.jsxs("span",{className:"text-red-600",children:["✗ ",o.filter(t=>t.success===!1).length," failed"]})]})]})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"What the test includes:"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Browser notification permissions check"}),e.jsx("li",{children:"• Creating notifications through MongoDB API"}),e.jsx("li",{children:"• Testing different notification types"}),e.jsx("li",{children:"• WebSocket connection check for real-time updates"}),e.jsx("li",{children:"• Notification display in the interface"})]})]})]})},M=()=>e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(B,{})});export{M as default};
