import{v as d,e as c,j as e,H as D,F as S,M as N,c as x,S as V,p as T,b as A}from"./index-d63ee538.js";import{r as i}from"./vendor-021dee49.js";import{C as E}from"./SkeletonLoading-3b438a19.js";import{u as F}from"./router-3052588b.js";import{C as M}from"./CheckCircleIcon-ad35d564.js";import{S as O}from"./StopIcon-2eadb9c5.js";import{E as y}from"./EyeIcon-6ff4a41f.js";import{C as L}from"./ClockIcon-d6d0aaad.js";import"./utils-917b1704.js";const Q=()=>{var f,b,p;const n=F(),[r,o]=i.useState(null),[l,v]=i.useState([]),[k,m]=i.useState(!0),[h,g]=i.useState(!1);i.useEffect(()=>{u()},[]);const u=async()=>{try{m(!0);const[t,s]=await Promise.all([d.getActiveVisit(),d.getMyVisits({limit:10})]);o(t.visit),v(s.visits)}catch(t){console.error("Error loading visit data:",t),c.error("Failed to load visit data")}finally{m(!1)}},w=async()=>{var t,s;if(r)try{g(!0),await d.checkOut({visitId:r._id}),c.success("Checked out successfully!"),o(null),u()}catch(a){console.error("Check-out error:",a),c.error(((s=(t=a.response)==null?void 0:t.data)==null?void 0:s.error)||"Failed to check out")}finally{g(!1)}},j=t=>{if(!t)return"N/A";const s=Math.floor(t/60),a=t%60;return s>0?`${s}h ${a}m`:`${a}m`},C=t=>{const s=Date.now()-new Date(t).getTime(),a=Math.floor(s/6e4);return j(a)};return k?e.jsx(E,{}):e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-lg mx-auto",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-600 via-emerald-600 to-teal-700 dark:from-green-700 dark:via-emerald-700 dark:to-teal-800 mx-4 mt-4 rounded-3xl p-6 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-6 -right-6 opacity-20",children:e.jsx("div",{className:"text-8xl",children:"â°"})}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold flex items-center",children:"Visit Management ðŸ¾"}),e.jsx("p",{className:"text-green-100 dark:text-green-200",children:"Track your dog park visits"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-green-200",children:r?"ðŸŸ¢ Active":"âšª Available"}),e.jsxs("div",{className:"text-xs text-green-300",children:[l.length," Total Visits"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-6 text-green-100",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-5 w-5 mr-2"}),e.jsx("span",{children:r?"Currently Checked In":"Ready to Visit"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"h-5 w-5 mr-2"}),e.jsxs("span",{children:[l.length," Visits"]})]})]})]})]}),r?e.jsxs("div",{className:"px-4 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(S,{className:"h-5 w-5 mr-2 text-red-500"}),"Active Visit"]}),e.jsx("span",{className:"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 text-xs px-2 py-1 rounded-full animate-pulse",children:"ðŸ”´ Live"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 p-4 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute -top-4 -right-4 opacity-20",children:e.jsx("div",{className:"text-6xl",children:"ðŸžï¸"})}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Currently at"}),e.jsx("h3",{className:"text-xl font-bold",children:((f=r.garden)==null?void 0:f.name)||"Unknown Garden"})]}),e.jsx("div",{className:"bg-white bg-opacity-20 rounded-xl p-2",children:e.jsx(N,{className:"h-5 w-5"})})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mb-1",children:C(r.checkInTime)}),e.jsx("div",{className:"text-xs text-green-700 dark:text-green-300",children:"Time Elapsed"})]}),e.jsxs("div",{className:"bg-emerald-50 dark:bg-emerald-900/20 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600 dark:text-emerald-400 mb-1",children:((b=r.dogs)==null?void 0:b.length)||0}),e.jsx("div",{className:"text-xs text-emerald-700 dark:text-emerald-300",children:"Dogs Playing"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(x,{className:"h-4 w-4 mr-2 text-pink-500"}),"Dogs Currently Playing"]}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:(p=r.dogs)==null?void 0:p.map(t=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-700/50 rounded-xl",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-br from-orange-100 to-amber-100 dark:from-orange-900 dark:to-amber-900 rounded-full flex items-center justify-center text-lg mr-3",children:"ðŸ•"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:(t==null?void 0:t.name)||"Unknown Dog"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:(t==null?void 0:t.breed)||"Unknown breed"})]})]},t._id))})]}),r.notes&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2 flex items-center",children:[e.jsx(V,{className:"h-4 w-4 mr-2 text-purple-500"}),"Visit Notes"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 bg-purple-50 dark:bg-purple-900/20 p-3 rounded-xl",children:r.notes})]}),e.jsx("button",{onClick:w,disabled:h,className:"w-full inline-flex items-center justify-center px-6 py-3 bg-gradient-to-r from-red-500 to-pink-500 text-white font-medium rounded-xl hover:from-red-600 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105 active:scale-95",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Checking out..."]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-5 w-5 mr-2"}),"Check Out Now"]})})]})]})]}):e.jsxs("div",{className:"px-4 mt-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(N,{className:"h-5 w-5 mr-2 text-gray-500"}),"No Active Visit"]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg border border-gray-100 dark:border-gray-700 p-8 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸžï¸"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"Ready for Adventure?"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:"You're not currently checked in to any dog park. Find a great spot for your furry friends!"}),e.jsxs("button",{onClick:()=>n("/gardens"),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-medium rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 transform hover:scale-105",children:[e.jsx(y,{className:"h-5 w-5 mr-2"}),"Find a Dog Park"]})]})]}),e.jsxs("div",{className:"px-4 mt-6 pb-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Recent Visits"]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-3xl shadow-lg border border-gray-100 dark:border-gray-700 overflow-hidden",children:l.length===0?e.jsxs("div",{className:"text-center py-8 px-6",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ“"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No visit history yet."}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Start visiting parks to build your history!"})]}):e.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-700",children:l.map(t=>{var s,a;return e.jsx("div",{className:"p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"h-10 w-10 bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900 dark:to-purple-900 rounded-full flex items-center justify-center text-lg mr-3",children:"ðŸžï¸"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-bold text-gray-900 dark:text-white",children:((s=t.garden)==null?void 0:s.name)||"Unknown Garden"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(t.checkInTime).toLocaleDateString()})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs mb-3",children:[e.jsxs("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:[e.jsx(L,{className:"flex-shrink-0 mr-1 h-3 w-3 text-gray-400"}),e.jsxs("span",{children:[new Date(t.checkInTime).toLocaleTimeString()," -",t.checkOutTime?new Date(t.checkOutTime).toLocaleTimeString():"Active"]})]}),t.duration&&e.jsx("div",{className:"flex items-center text-gray-600 dark:text-gray-400",children:e.jsxs("span",{className:"font-medium",children:["Duration: ",j(t.duration)]})})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-600 dark:text-gray-400",children:[e.jsx(x,{className:"flex-shrink-0 mr-1 h-3 w-3 text-pink-400"}),e.jsxs("span",{children:["Dogs: ",((a=t.dogs)==null?void 0:a.map(I=>I.name).join(", "))||"None"]})]})]}),e.jsx("div",{className:"ml-4",children:e.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${t.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":t.status==="completed"?"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:[t.status==="active"&&"ðŸŸ¢ ",t.status==="completed"&&"âœ… ",t.status==="cancelled"&&"âŒ ",t.status.charAt(0).toUpperCase()+t.status.slice(1)]})})]})},t._id)})})})]}),e.jsx("div",{className:"px-4 pb-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-3xl p-6 text-white",children:[e.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center",children:[e.jsx(A,{className:"h-5 w-5 mr-2"}),"Quick Actions"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>n("/gardens"),className:"flex items-center justify-center px-4 py-3 bg-white bg-opacity-20 rounded-xl hover:bg-opacity-30 transition-all duration-200",children:[e.jsx(y,{className:"h-5 w-5 mr-2"}),"Browse Gardens"]}),e.jsxs("button",{onClick:()=>n("/my-dogs"),className:"flex items-center justify-center px-4 py-3 bg-white bg-opacity-20 rounded-xl hover:bg-opacity-30 transition-all duration-200",children:[e.jsx(x,{className:"h-5 w-5 mr-2"}),"My Dogs"]})]})]})})]})})};export{Q as default};
