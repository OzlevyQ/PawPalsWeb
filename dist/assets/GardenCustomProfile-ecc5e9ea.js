import{u as p,e as s,j as e,A as h}from"./index-d63ee538.js";import{r as d}from"./vendor-021dee49.js";import{gardenService as c}from"./gardenService-8e5619dd.js";import{C as j}from"./CustomProfileEditor-023afb3e.js";import{b as y,u as b}from"./router-3052588b.js";import"./utils-917b1704.js";import"./EyeSlashIcon-3abbdbae.js";import"./EyeIcon-6ff4a41f.js";const k=()=>{var n,l;const{id:o}=y(),t=b(),{user:i}=p(),[r,m]=d.useState(null);d.useEffect(()=>{u()},[o]);const u=async()=>{try{const a=await c.getGardenById(o);if(i.role!=="admin"&&a.manager._id!==i._id){s.error("You are not authorized to edit this garden"),t("/manage-gardens");return}m(a)}catch(a){console.error("Error loading garden:",a),s.error("Failed to load garden"),t("/manage-gardens")}},g=async a=>{try{await c.updateCustomProfile(o,a),s.success("Custom profile updated successfully!"),t("/manage-gardens")}catch(x){console.error("Error updating custom profile:",x),s.error("Failed to update custom profile")}};if(!r)return null;const f=["name","description","location.address","location.city","type","capacity.maxDogs","statistics.averageRating","statistics.totalReviews"];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>t("/manage-gardens"),className:"mb-4 inline-flex items-center text-sm text-gray-600 hover:text-gray-900",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),"Back to Garden Management"]}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Custom Profile for ",r.name]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create a unique profile page for your dog park"})]})}),e.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Public Profile"}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Public Profile URL:"})," ",e.jsxs("a",{href:`${window.location.origin}/garden/${r._id}`,target:"_blank",rel:"noopener noreferrer",className:"underline",children:[window.location.origin,"/garden/",r._id]})]})})]}),e.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:e.jsx(j,{initialHtml:((n=r.customProfile)==null?void 0:n.html)||"",initialCss:((l=r.customProfile)==null?void 0:l.css)||"",onSave:g,requiredFields:f,type:"garden"})})]})};export{k as default};
