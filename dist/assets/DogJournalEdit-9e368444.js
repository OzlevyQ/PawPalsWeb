import{u as ne,e as g,k as ie,j as e,A as de,X as U,c as ce,i as ge,I as me}from"./index-d63ee538.js";import{r as d}from"./vendor-021dee49.js";import{d as b}from"./dogJournalService-9da19975.js";import{gardenService as ue}from"./gardenService-8e5619dd.js";import{b as xe,u as be}from"./router-3052588b.js";import{T as he}from"./TrashIcon-e750183e.js";import{P as ye}from"./PhotoIcon-4f8783ce.js";import{H as pe}from"./HandThumbDownIcon-02009664.js";import{P as fe}from"./PlusIcon-d0c3f3f8.js";import"./utils-917b1704.js";const Le=()=>{const{id:c}=xe();ne();const h=be(),[_,J]=d.useState(!0),[D,S]=d.useState(!1),[H,W]=d.useState([]),[k,X]=d.useState([]),[y,N]=d.useState([]),[p,Y]=d.useState(""),[E,K]=d.useState([]),[w,C]=d.useState([]),[s,m]=d.useState({title:"",description:"",album:"Best Friends",customAlbumName:"",meetingDate:"",relationshipRating:5,ownerDog:"",metDog:{name:"",breed:"",age:"",size:"",characteristics:""},location:{type:"garden",garden:"",customLocation:{name:"",coordinates:null}},interactionNotes:{playful:!1,friendly:!1,aggressive:!1,shy:!1,energetic:!1,calm:!1},tags:[]}),[f,I]=d.useState(""),V=[{value:"Best Friends",label:"Best Friends",icon:ce,color:"from-pink-500 to-rose-600"},{value:"Enemies",label:"Enemies",icon:pe,color:"from-red-500 to-red-600"},{value:"Playmates",label:"Playmates",icon:ge,color:"from-blue-500 to-indigo-600"},{value:"Acquaintances",label:"Acquaintances",icon:me,color:"from-purple-500 to-indigo-600"},{value:"Custom",label:"Custom Album",icon:fe,color:"from-emerald-500 to-teal-600"}];d.useEffect(()=>{L(),Q()},[c]);const L=async()=>{var r,a,t,l,i,u,v,j,x,M,P,F,R,T,G,q,z,B,$;try{const o=(await b.getEntry(c)).entry;m({title:o.title||"",description:o.description||"",album:o.album||"Best Friends",customAlbumName:o.customAlbumName||"",meetingDate:o.meetingDate?new Date(o.meetingDate).toISOString().split("T")[0]:"",relationshipRating:o.relationshipRating||5,ownerDog:((r=o.ownerDog)==null?void 0:r._id)||"",metDog:{name:((a=o.metDog)==null?void 0:a.name)||"",breed:((t=o.metDog)==null?void 0:t.breed)||"",age:((l=o.metDog)==null?void 0:l.age)||"",size:((i=o.metDog)==null?void 0:i.size)||"",characteristics:((u=o.metDog)==null?void 0:u.characteristics)||""},location:{type:(v=o.location)!=null&&v.garden?"garden":"custom",garden:((x=(j=o.location)==null?void 0:j.garden)==null?void 0:x._id)||"",customLocation:{name:((P=(M=o.location)==null?void 0:M.customLocation)==null?void 0:P.name)||"",coordinates:((R=(F=o.location)==null?void 0:F.customLocation)==null?void 0:R.coordinates)||null}},interactionNotes:{playful:((T=o.interactionNotes)==null?void 0:T.playful)||!1,friendly:((G=o.interactionNotes)==null?void 0:G.friendly)||!1,aggressive:((q=o.interactionNotes)==null?void 0:q.aggressive)||!1,shy:((z=o.interactionNotes)==null?void 0:z.shy)||!1,energetic:((B=o.interactionNotes)==null?void 0:B.energetic)||!1,calm:(($=o.interactionNotes)==null?void 0:$.calm)||!1},tags:o.tags||[]}),K(o.images||[])}catch(O){console.error("Error loading entry:",O),g.error("Failed to load journal entry"),h("/dog-journal")}},Q=async()=>{try{const[r,a]=await Promise.all([ie.get("/dogs"),ue.getAllGardens()]),t=a.gardens||[];console.log("Edit form - Loaded gardens:",t.length),W(r.data.dogs||[]),X(t),N(t)}catch(r){console.error("Error loading data:",r),g.error("Failed to load required data")}finally{J(!1)}},n=(r,a)=>{if(r.includes(".")){const[t,l]=r.split(".");m(i=>({...i,[t]:{...i[t],[l]:a}}))}else m(t=>({...t,[r]:a}))},Z=(r,a)=>{m(t=>({...t,interactionNotes:{...t.interactionNotes,[r]:a}}))},ee=r=>{Array.from(r.target.files).forEach(t=>{if(t.type.startsWith("image/")){const l=new FileReader;l.onload=i=>{C(u=>[...u,{file:t,preview:i.target.result,caption:""}])},l.readAsDataURL(t)}})},re=r=>{C(a=>a.filter((t,l)=>l!==r))},te=async r=>{if(window.confirm("Are you sure you want to delete this image?"))try{await b.deleteImage(c,r),g.success("Image deleted successfully"),L()}catch(a){console.error("Error deleting image:",a),g.error("Failed to delete image")}},ae=(r,a)=>{C(t=>t.map((l,i)=>i===r?{...l,caption:a}:l))},A=()=>{f.trim()&&!s.tags.includes(f.trim())&&(m(r=>({...r,tags:[...r.tags,f.trim()]})),I(""))},se=r=>{m(a=>({...a,tags:a.tags.filter(t=>t!==r)}))},oe=r=>{if(Y(r),!r.trim())N(k);else{const a=k.filter(t=>{const l=r.toLowerCase(),i=(t.name||"").toLowerCase().includes(l),u=(t.address||"").toLowerCase().includes(l),v=(t.city||"").toLowerCase().includes(l),j=(t.description||"").toLowerCase().includes(l);let x=!1;return t.location&&(typeof t.location=="string"?x=t.location.toLowerCase().includes(l):(t.location.area||t.location.region)&&(x=(t.location.area||"").toLowerCase().includes(l)||(t.location.region||"").toLowerCase().includes(l))),i||u||v||x||j});N(a),console.log("Edit form - Search term:",r),console.log("Edit form - Total gardens:",k.length),console.log("Edit form - Filtered gardens:",a.length)}},le=async r=>{r.preventDefault();const a=b.validateEntry(s);if(!a.isValid){Object.values(a.errors).forEach(t=>{g.error(t)});return}S(!0);try{await b.updateEntry(c,s,w),g.success("Journal entry updated successfully!"),h(`/dog-journal/entry/${c}`)}catch(t){console.error("Error updating entry:",t),g.error("Failed to update journal entry")}finally{S(!1)}};return _?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading entry..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-blue-50 dark:from-gray-900 dark:via-gray-900 dark:to-gray-800 py-8",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>h(`/dog-journal/entry/${c}`),className:"mr-4 p-3 text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-700 rounded-2xl transition-all",children:e.jsx(de,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Edit Journal Entry"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Update your dog encounter details ðŸ“"})]})]})}),e.jsxs("form",{onSubmit:le,className:"space-y-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 border border-gray-100 dark:border-gray-700 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Entry Title *"}),e.jsx("input",{type:"text",value:s.title,onChange:r=>n("title",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Met Charlie at Central Park",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Meeting Date *"}),e.jsx("input",{type:"date",value:s.meetingDate,onChange:r=>n("meetingDate",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Description *"}),e.jsx("textarea",{value:s.description,onChange:r=>n("description",r.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Describe your encounter with this dog...",required:!0})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 border border-gray-100 dark:border-gray-700 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Album & Rating"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:V.map(r=>{const a=r.icon;return e.jsxs("label",{className:`relative flex items-center p-4 border-2 rounded-2xl cursor-pointer transition-all duration-300 ${s.album===r.value?"border-blue-500 bg-gradient-to-br from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-800/20 shadow-lg transform scale-105":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:[e.jsx("input",{type:"radio",name:"album",value:r.value,checked:s.album===r.value,onChange:t=>n("album",t.target.value),className:"sr-only"}),e.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-br ${r.color} text-white mr-3`,children:e.jsx(a,{className:"w-5 h-5"})}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:r.label})]},r.value)})}),s.album==="Custom"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Custom Album Name *"}),e.jsx("input",{type:"text",value:s.customAlbumName,onChange:r=>n("customAlbumName",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter custom album name",required:s.album==="Custom"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Relationship Rating"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[[1,2,3,4,5].map(r=>e.jsx("button",{type:"button",onClick:()=>n("relationshipRating",r),className:`w-12 h-12 rounded-2xl border-2 flex items-center justify-center font-bold transition-all duration-300 ${s.relationshipRating>=r?"border-yellow-400 bg-gradient-to-br from-yellow-400 to-amber-500 text-white shadow-lg transform scale-110":"border-gray-300 dark:border-gray-600 hover:border-yellow-400 text-gray-600 dark:text-gray-400"}`,children:r},r)),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400 ml-4 font-medium",children:["(",s.relationshipRating,"/5)"]})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 border border-gray-100 dark:border-gray-700 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Dog Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Your Dog (Optional)"}),e.jsxs("select",{value:s.ownerDog,onChange:r=>n("ownerDog",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select your dog"}),H.map(r=>e.jsxs("option",{value:r._id,children:[r.name," (",r.breed,")"]},r._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Dog You Met - Name *"}),e.jsx("input",{type:"text",value:s.metDog.name,onChange:r=>n("metDog.name",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Dog's name",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Breed"}),e.jsx("input",{type:"text",value:s.metDog.breed,onChange:r=>n("metDog.breed",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Golden Retriever"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Age"}),e.jsx("input",{type:"text",value:s.metDog.age,onChange:r=>n("metDog.age",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., 2 years"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Size"}),e.jsxs("select",{value:s.metDog.size,onChange:r=>n("metDog.size",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select size"}),e.jsx("option",{value:"Small",children:"Small"}),e.jsx("option",{value:"Medium",children:"Medium"}),e.jsx("option",{value:"Large",children:"Large"}),e.jsx("option",{value:"Extra Large",children:"Extra Large"})]})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Characteristics"}),e.jsx("textarea",{value:s.metDog.characteristics,onChange:r=>n("metDog.characteristics",r.target.value),rows:3,className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Describe the dog's appearance, personality, etc."})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 border border-gray-100 dark:border-gray-700 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Location"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Location Type"}),e.jsxs("div",{className:"flex space-x-6",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"locationType",value:"garden",checked:s.location.type==="garden",onChange:r=>n("location.type",r.target.value),className:"w-5 h-5 text-blue-600 border-gray-300 focus:ring-blue-500 rounded"}),e.jsx("span",{className:"ml-3 font-medium text-gray-900 dark:text-white",children:"Dog Garden"})]}),e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"radio",name:"locationType",value:"custom",checked:s.location.type==="custom",onChange:r=>n("location.type",r.target.value),className:"w-5 h-5 text-blue-600 border-gray-300 focus:ring-blue-500 rounded"}),e.jsx("span",{className:"ml-3 font-medium text-gray-900 dark:text-white",children:"Other Location"})]})]})]}),s.location.type==="garden"?e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Select Garden"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Search gardens by name, address, or city...",value:p,onChange:r=>oe(r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white pr-12"}),e.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),e.jsxs("select",{value:s.location.garden,onChange:r=>n("location.garden",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select a garden"}),y.map(r=>e.jsxs("option",{value:r._id,children:[r.name," - ",r.address||r.city||"No address"]},r._id))]}),p&&y.length===0&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:['No gardens found matching "',p,'"']}),!p&&y.length>10&&e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",y.length," gardens. Use search to filter results."]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Location Name"}),e.jsx("input",{type:"text",value:s.location.customLocation.name,onChange:r=>n("location.customLocation.name",r.target.value),className:"w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"e.g., Central Park, My Neighborhood"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 border border-gray-100 dark:border-gray-700 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Interaction Notes"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries({playful:"Playful",friendly:"Friendly",aggressive:"Aggressive",shy:"Shy",energetic:"Energetic",calm:"Calm"}).map(([r,a])=>e.jsxs("label",{className:"flex items-center cursor-pointer p-3 rounded-2xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:s.interactionNotes[r],onChange:t=>Z(r,t.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"ml-3 font-medium text-gray-900 dark:text-white",children:a})]},r))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 border border-gray-100 dark:border-gray-700 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Photos ðŸ“¸"}),E.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Current Photos"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:E.map((r,a)=>e.jsxs("div",{className:"relative bg-gray-50 dark:bg-gray-700 rounded-2xl overflow-hidden",children:[e.jsx("img",{src:b.getImageUrl(r.url),alt:`Existing photo ${a+1}`,className:"w-full h-40 object-cover"}),e.jsx("button",{type:"button",onClick:()=>te(a),className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:e.jsx(he,{className:"w-4 h-4"})}),r.isMainImage&&e.jsx("div",{className:"absolute bottom-2 left-2 bg-blue-500 text-white px-3 py-1 rounded-xl text-xs font-semibold",children:"Main"}),r.caption&&e.jsx("div",{className:"p-3",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:r.caption})})]},a))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:ee,className:"hidden",id:"image-upload"}),e.jsx("label",{htmlFor:"image-upload",className:"flex items-center justify-center w-full p-8 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-3xl cursor-pointer hover:border-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-300",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-purple-600 rounded-3xl text-white inline-flex mb-4",children:e.jsx(ye,{className:"w-12 h-12"})}),e.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Add More Photos"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Click to upload new images of your dog encounter"})]})})]}),w.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"New Photos to Add"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map((r,a)=>e.jsxs("div",{className:"relative bg-gray-50 dark:bg-gray-700 rounded-2xl overflow-hidden",children:[e.jsx("img",{src:r.preview,alt:`New photo ${a+1}`,className:"w-full h-40 object-cover"}),e.jsx("button",{type:"button",onClick:()=>re(a),className:"absolute top-2 right-2 p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:e.jsx(U,{className:"w-4 h-4"})}),e.jsx("div",{className:"p-3",children:e.jsx("input",{type:"text",placeholder:"Add caption...",value:r.caption,onChange:t=>ae(a,t.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-600 text-gray-900 dark:text-white"})})]},a))})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-3xl p-8 border border-gray-100 dark:border-gray-700 shadow-lg",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-3 mb-6",children:s.tags.map((r,a)=>e.jsxs("span",{className:"bg-gradient-to-r from-blue-100 to-purple-100 dark:from-blue-900/30 dark:to-purple-800/30 text-blue-800 dark:text-blue-300 px-4 py-2 rounded-full text-sm font-semibold flex items-center",children:[r,e.jsx("button",{type:"button",onClick:()=>se(r),className:"ml-2 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-200",children:e.jsx(U,{className:"w-4 h-4"})})]},a))}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:"text",value:f,onChange:r=>I(r.target.value),onKeyPress:r=>r.key==="Enter"&&(r.preventDefault(),A()),className:"flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-l-2xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Add a tag..."}),e.jsx("button",{type:"button",onClick:A,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-r-2xl hover:from-blue-700 hover:to-purple-700 transition-all font-semibold",children:"Add"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6",children:[e.jsx("button",{type:"button",onClick:()=>h(`/dog-journal/entry/${c}`),className:"px-8 py-4 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-2xl hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors font-semibold",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:D,className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-2xl transition-all transform hover:scale-105 disabled:opacity-50 font-semibold flex items-center",children:D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"}),"Saving..."]}):"Save Changes"})]})]})]})})};export{Le as default};
